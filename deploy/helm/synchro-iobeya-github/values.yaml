image:
  repository: synchro-iobeya-github
  tag: "latest"
  pullPolicy: IfNotPresent

replicaCount: 1

service:
  type: ClusterIP
  port: 80
  targetPort: 28080

ingress:
  enabled: false
  className: ""
  annotations: {}
  hosts:
    - host: synchro.local
      paths:
        - path: /
          pathType: Prefix
  tls: []

resources:
  limits:
    cpu: 500m
    memory: 512Mi
  requests:
    cpu: 100m
    memory: 128Mi

# Security Context
securityContext:
  runAsNonRoot: true
  runAsUser: 10001
  fsGroup: 10001
  seccompProfile:
    type: RuntimeDefault

containerSecurityContext:
  allowPrivilegeEscalation: false
  capabilities:
    drop:
      - ALL
  readOnlyRootFilesystem: false

nodeSelector: {}
tolerations: []
affinity: {}

# Pod Disruption Budget
podDisruptionBudget:
  enabled: false
  minAvailable: 1
  # maxUnavailable: 1

# Secret environment variables (ACCESS_KEY and tokens)
# Set create: false and specify existingSecret to use an external secret (e.g., Sealed Secrets, External Secrets Operator)
secret:
  create: true
  name: synchro-iobeya-github-secrets
  # existingSecret: ""  # Use this to reference an existing secret instead of creating one
  env:
    ACCESS_KEY: ""
    GITHUB_TOKEN: ""
    IOBEYA_TOKEN: ""

# Environment variables loaded from secrets/configmaps
# This allows flexible configuration with multiple sources
envFrom: []
  # Example with multiple secrets:
  # - secretRef:
  #     name: synchro-iobeya-github-secrets
  # - secretRef:
  #     name: additional-tokens
  # - configMapRef:
  #     name: app-config

# Inline content of config.yaml (mounted as /app/config.yaml)
# You can also set this with: --set-file config=./config.yaml
config: |
  grist:
    api_url: "https://grist.example/api"
    api_token: ""
    default_doc_id: ""
    default_table: "Features"
    default_epic_table: "Epics"
    default_feature_table: "Features"
  iobeya:
    base_url: "https://iobeya.example"
    token: ""
    types_card_features: []
  github:
    token_env_var: "{{ .Values.secret.env.GITHUB_TOKEN }}"
    organizations: ["ia-generative"]
  security:
    access_keys:
      - "{{ .Values.secret.env.ACCESS_KEY }}"
